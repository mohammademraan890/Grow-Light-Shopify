{%- style -%}
  :root {
    --header-bg: {{ section.settings.header_bg }};
    --header-border: {{ section.settings.header_border }};
    --nav-border: {{ section.settings.nav_border }};
    --text-color: {{ section.settings.text_color }};
    --accent-color: {{ section.settings.accent_color }};
    --bottom-bg: {{ section.settings.bottom_bg }};
    
    /* âœ… Bottom header variables (FIX) */
    --bottom-bg: {{ section.settings.bottom_bg }};
    --bottom-text: {{ section.settings.bottom_text }};
    --bottom-link: {{ section.settings.bottom_link }};
  }

  .site-header {
    background: var(--header-bg);
    color: var(--text-color);
  }

  .header-top-inner {
    border-bottom: 1px solid var(--header-border);
  }

  .nav-menu {
    border-bottom: 1px solid var(--nav-border);
  }

 .header-btm {
    background: var(--bottom-bg);
    color: var(--bottom-text);
    position: relative;
  }

  .header-btm a {
    color: var(--bottom-link) !important;
  }

  /* Swiper arrows */
  .btm-swiper .swiper-button-prev,
  .btm-swiper .swiper-button-next {
    color: #000;
    width: 28px;
    height: 28px;
  }

  .btm-swiper .swiper-button-prev::after,
  .btm-swiper .swiper-button-next::after {
    font-size: 18px;
    font-weight: bold;
  }

  /* Desktop: disable swiper layout */
  @media (min-width: 768px) {
    .btm-swiper {
      overflow: visible;
    }
    .btm-swiper .swiper-wrapper {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      transform: none !important;
    }
    .btm-swiper .swiper-slide {
      width: auto !important;
    }
    .btm-swiper .swiper-button-prev,
    .btm-swiper .swiper-button-next {
      display: none;
    }
  }

{%- endstyle -%}

<header class="site-header top-0 left-0 right-0 bg-white">
  {%- if section.settings.show_top_bar -%}
    <div class="header-top-inner">
      <div class="custom-container">
        <div class="flex items-center gap-10">
          {%- if section.settings.logo_position == 'left' -%}
            <div class="header-logo">
              <img
                src="{{ 'grow-light-logo.webp' | asset_url }}"
                alt="{{ shop.name }}"
                width="{{ section.settings.logo_width }}"
              >
            </div>
          {%- endif -%}

          <div class="header-left flex flex-col gap-[20px] w-full">
            <!-- TOP INFO BAR -->
            <div class="border-b py-[10px] flex justify-between text-[12px] items-center w-full">
              <div class="flex items-center gap-5">
                <a href="mailto:support@growlightheaven.com" class="header-link"> support@growlightheaven.com </a>
                <a href="tel:9142196983" class="header-link"> (914) 219-6983 </a>
                <span>Mon-Fri: 9AM - 5PM EST</span>
              </div>

              <div class="flex items-center gap-5">
                <a href="#" class="header-link">Commercial Pricing</a>
                <a href="#" class="header-link">Get Rebates</a>
                <a href="#" class="header-link">Facility Design</a>
              </div>
            </div>

            <!-- SEARCH + ICONS -->
            <div class="flex items-center mb-4 gap-10">
              <div class="w-full flex items-center gap-2 border border-[#959595] rounded-sm focus-within:shadow-[0_0_0_3px_#4140421a]">
                <input
                  placeholder="What are you looking for?"
                  class="w-full py-2.5 px-5 text-[14px] focus:outline-none"
                  type="text"
                >
                <button class="w-[40px] flex items-center justify-center cursor-pointer">
                  {% render 'svg-icons', name: 'search-icon' %}
                </button>
              </div>

              <div class="flex items-center gap-10 text-[12px]">
                <a href="#" class="flex items-center flex-col group">
                  {% render 'svg-icons', name: 'user-icon', icon_class: 'fill-[#414042] group-hover:fill-[#006A2E]' %}
                  <span class="group-hover:underline whitespace-nowrap">Sign In</span>
                </a>
                <a href="#" class="flex items-center flex-col group">
                  {% render 'svg-icons',
                    name: 'wishlist-icon',
                    icon_class: 'fill-[#414042] group-hover:fill-[#006A2E]'
                  %}
                  <span class="group-hover:underline whitespace-nowrap">My Wishlist</span>
                </a>
                <a href="#" class="flex items-center flex-col group">
                  {% render 'svg-icons', name: 'cart-icon', icon_class: 'fill-[#414042] group-hover:fill-[#006A2E]' %}
                  <span class="group-hover:underline whitespace-nowrap">My Cart</span>
                </a>
              </div>
            </div>
          </div>

          {%- if section.settings.logo_position == 'right' -%}
            <div class="header-logo">
              <img
                src="{{ 'grow-light-logo.webp' | asset_url }}"
                alt="{{ shop.name }}"
                width="{{ section.settings.logo_width }}"
              >
            </div>
          {%- endif -%}
        </div>
      </div>
    </div>
  {%- endif -%}

  <!-- NAVIGATION -->
  <div class="nav-menu bg-white">
    <div class="custom-container">
      <ul class="flex items-center justify-between text-[16px] font-medium text-[#414042]">
        {% for link in linklists['nav-menu'].links %}
          <li>
            <a href="{{ link.url }}" class="block px-2 py-3 hover:text-[#006A2E]! transition-colors duration-200">
              {{ link.title }}
            </a>
          </li>
        {% endfor %}
      </ul>
    </div>
  </div>

{%- if section.settings.show_bottom_bar -%}
<div class="header-btm py-2.5">
  <div class="custom-container relative">

    <div class="swiper btm-swiper" id="bottomBarSwiper">
      <div class="swiper-wrapper text-center">

        <div class="swiper-slide">
          <p class="text-[16px] font-medium">
            {{ section.settings.bottom_title_1 }}
          </p>
          <p class="text-[14px]">
            {{ section.settings.bottom_text_1 }}
            <a href="tel:{{ section.settings.bottom_phone_1 | replace: ' ', '' }}">
              {{ section.settings.bottom_phone_1 }}
            </a>
          </p>
        </div>

        <div class="swiper-slide">
          <p class="text-[16px] font-medium">
            {{ section.settings.bottom_title_2 }}
          </p>
          <p class="text-[14px]">
            {{ section.settings.bottom_text_2 }}
            <a href="tel:{{ section.settings.bottom_phone_2 | replace: ' ', '' }}">
              {{ section.settings.bottom_phone_2 }}
            </a>
          </p>
        </div>

      </div>

      <!-- Arrows -->
      <div class="swiper-button-prev"></div>
      <div class="swiper-button-next"></div>
    </div>

  </div>
</div>
{%- endif -%}

</header>

{% schema %}
{
  "name": "Custom Header",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_top_bar",
      "label": "Show top header",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_bottom_bar",
      "label": "Show bottom bar",
      "default": true
    },
    {
      "type": "select",
      "id": "logo_position",
      "label": "Logo position",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "right", "label": "Right" }
      ],
      "default": "left"
    },
    {
      "type": "range",
      "id": "logo_width",
      "label": "Logo width (px)",
      "min": 60,
      "max": 200,
      "step": 10,
      "default": 100
    },

    {
      "type": "color",
      "id": "header_bg",
      "label": "Header background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "header_border",
      "label": "Header border color",
      "default": "#E9E9E9"
    },
    {
      "type": "color",
      "id": "nav_border",
      "label": "Navigation border color",
      "default": "#006A2E"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#414042"
    },
    {
      "type": "color",
      "id": "accent_color",
      "label": "Accent / hover color",
      "default": "#006A2E"
    },
    {
      "type": "header",
      "content": "Bottom Bar Settings"
    },
    {
      "type": "color",
      "id": "bottom_bg",
      "label": "Bottom bar background",
      "default": "#F4F4F4"
    },
    {
      "type": "color",
      "id": "bottom_text",
      "label": "Bottom bar text color",
      "default": "#414042"
    },
    {
      "type": "color",
      "id": "bottom_link",
      "label": "Bottom bar link color",
      "default": "#36895A"
    },
    {
      "type": "text",
      "id": "bottom_title_1",
      "label": "Slide 1 title",
      "default": "Commercial Grower?"
    },
    {
      "type": "text",
      "id": "bottom_text_1",
      "label": "Slide 1 text",
      "default": "For commercial pricing:"
    },
    {
      "type": "text",
      "id": "bottom_phone_1",
      "label": "Slide 1 phone",
      "default": "(914) 219-6983"
    },
    {
      "type": "text",
      "id": "bottom_title_2",
      "label": "Slide 2 title",
      "default": "Commercial Grower?"
    },
    {
      "type": "text",
      "id": "bottom_text_2",
      "label": "Slide 2 text",
      "default": "For commercial pricing:"
    },
    {
      "type": "text",
      "id": "bottom_phone_2",
      "label": "Slide 2 phone",
      "default": "(914) 219-6983"
    }
  ],
  "presets": [
    {
      "name": "Custom Header"
    }
  ]
}
{% endschema %}

<script>
  document.addEventListener('DOMContentLoaded', function () {
    let bottomSwiper;

    function initBottomSwiper() {
      if (window.innerWidth < 768 && !bottomSwiper) {
        bottomSwiper = new Swiper('#bottomBarSwiper', {
          slidesPerView: 1,
          loop: true,
          autoplay: {
            delay: 3000,
            disableOnInteraction: false
          },
          navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev'
          }
        });
      }

      if (window.innerWidth >= 768 && bottomSwiper) {
        bottomSwiper.destroy(true, true);
        bottomSwiper = null;
      }
    }

    initBottomSwiper();
    window.addEventListener('resize', initBottomSwiper);
  });
</script>


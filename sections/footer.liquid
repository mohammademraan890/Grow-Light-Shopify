<style>
  .footer-accordion {
    display: none;
  }

  @media (max-width: 767px) {
    .footer-accordion {
      display: block;
    }

    .footer-desktop-menu {
      display: none;
    }
  }

  .accordion-item {
    border-bottom: 1px solid #e5e7eb;
  }

  .accordion-button {
    width: 100%;
    padding: 16px 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: none;
    border: none;
    text-align: left;
    font-size: 15px;
    color: #1f2937;
    cursor: pointer;
  }

  .accordion-button:hover {
    text-decoration: underline;
  }

  .accordion-icon {
    transition: transform 0.3s ease;
  }

  .accordion-icon.open {
    transform: rotate(180deg);
  }

  .accordion-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
  }

  .accordion-content.open {
    max-height: 500px;
    padding-bottom: 16px;
  }

  .accordion-content ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .accordion-content li {
    margin-bottom: 12px;
  }

  .accordion-content a {
    color: #6b7280;
    text-decoration: none;
    font-size: 14px;
  }

  .accordion-content a:hover {
    text-decoration: underline;
  }
</style>

<footer
  class="footer-custom border-t border-gray-200"
  style="
    background-color: {{ section.settings.bg_color }};
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
  "
>
  <div class="custom-container">
    <div class="grid grid-cols-1 md:grid-cols-4 xl:grid-cols-6 gap-8">
      <!-- DESKTOP MENU COLUMN -->
      <div class="footer-desktop-menu md:col-span-3 xl:col-span-3">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-y-10 gap-x-4">
          {% for link in linklists[section.settings.menu].links %}
            <div>
              <a href="{{ link.url }}" class="footer-heading flex items-center gap-1">
                {{ link.title }}
                {% render 'svg-icons', name: 'chevron-right', icon_class: 'w-4 h-4' %}
              </a>

              {% if link.links.size > 0 %}
                <ul>
                  {% for child in link.links %}
                    <li>
                      <a href="{{ child.url }}" class="footer-link">
                        {{ child.title }}
                      </a>
                    </li>
                  {% endfor %}
                </ul>
              {% endif %}
            </div>
          {% endfor %}
        </div>
      </div>

      <!-- MOBILE ACCORDION MENU -->
      <div class="footer-accordion md:col-span-3 xl:col-span-3">
        {% for link in linklists[section.settings.menu].links %}
          <div class="accordion-item">
            <button
              class="accordion-button"
              onclick="toggleAccordion(this)"
              type="button"
            >
              <span>{{ link.title }}</span>
              <svg class="accordion-icon w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>

            {% if link.links.size > 0 %}
              <div class="accordion-content">
                <ul>
                  {% for child in link.links %}
                    <li>
                      <a href="{{ child.url }}">
                        {{ child.title }}
                      </a>
                    </li>
                  {% endfor %}
                </ul>
              </div>
            {% endif %}
          </div>
        {% endfor %}
      </div>

      <!-- MIDDLE COLUMN (Shows below accordions on mobile) -->
      <div class="md:col-span-1 xl:col-span-1 order-2 md:order-none">
        {% if section.settings.middle_column_text != blank %}
          <div class="prose prose-sm text-gray-600">
            {{ section.settings.middle_column_text }}
          </div>
        {% endif %}
      </div>

      <!-- NEWSLETTER COLUMN -->
      <div
        class="
          md:col-span-4
          xl:col-span-2
          order-3
          md:order-last
          xl:order-none
        "
      >
        <div class="newsletter-card border border-gray-200 p-8 rounded-sm">
          <h2 class="text-[26px] font-bold text-gray-800 mb-3 leading-tight">
            {{ section.settings.newsletter_title }}
          </h2>

          <p class="text-[15px] text-gray-600 mb-8">
            {{ section.settings.newsletter_text }}
          </p>

          {% form 'customer', class: 'flex gap-2 mb-8' %}
            <input type="hidden" name="contact[tags]" value="newsletter">

            <input
              type="email"
              name="contact[email]"
              placeholder="Enter email address..."
              class="flex-1 border border-gray-300 px-4 py-3 text-[14px] focus:outline-none focus:border-green-700 rounded-sm"
              required
            >

            <button
              type="submit"
              class="text-white relative group px-6 py-3 font-bold text-[14px] transition-colors rounded-sm"
              style="background-color: {{ section.settings.accent_color }};"
            >
              Subscribe
              <div
                class="btn-overlay absolute  bg-white z-10 w-full h-full top-0 left-0 opacity-0 scale-30 rounded-sm group-hover:scale-100 group-hover:opacity-30 duration-500 transition-all"
              ></div>
            </button>
          {% endform %}

          <!-- SOCIAL -->
          <div class="flex items-center flex-wrap gap-4">
            {% if section.settings.show_social %}
              <div class="flex gap-4 items-center">
                {% for block in section.blocks %}
                  {% if block.type == 'social_icon' and block.settings.icon != blank %}
                    <a
                      href="{{ block.settings.link }}"
                      class="social-icon"
                      {% if block.settings.link != blank %}
                        target="_blank" rel="noopener"
                      {% endif %}
                    >
                      <img
                        src="{{ block.settings.icon | image_url: width: 40 }}"
                        alt="Social Icon"
                        loading="lazy"
                      >
                    </a>
                  {% endif %}
                {% endfor %}
              </div>
            {% endif %}

            {% if section.settings.social_handle != blank %}
              <span class="text-[14px] font-medium text-gray-500"> /{{ section.settings.social_handle }} </span>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>
<div
  style="
    box-shadow: rgba(22, 22, 22, 0.16) 0px 2px 4px;
    background-color:rgb(235, 235, 235);
    width: 60px;
  "
  class=" p-[13px] rounded-full fixed bottom-15 right-8 cursor-pointer z-100! hover:scale-110 transition-all duration-200"
>
  <img class="" src="{{"typing.png" |  asset_url}}" alt="Image">
</div>
<div
  id="backToTop"
  style="
    box-shadow: rgba(22, 22, 22, 0.16) 0px 2px 4px;
    background-color:rgb(255, 255, 255);
    width: 35px;
  "
  class=" p-[11px] rounded-full fixed bottom-4 right-8 z-100! cursor-pointer"
>
  <img class="" src="{{"top.png" |  asset_url}}" alt="Image">
</div>

<style>
      .footer-heading, footer.footer-custom ul strong {
        font-size: 16px;
        font-weight: 500;
        color: {{ section.settings.heading_color }};
        transition: color 0.2s;
      }
      .footer-heading:hover {
        text-decoration: underline;
      }
      .footer-heading {
      margin-bottom: {{ section.settings.footer_heading_spacing }}px;
    }

    .footer-link {
      margin-top: {{ section.settings.footer_link_spacing }}px;
    }

    /* Newsletter spacing */
    .newsletter-card h2,
    .newsletter-card p,
    .newsletter-card form {
      margin-bottom: {{ section.settings.newsletter_spacing }}px;
    }

      .footer-link,   footer.footer-custom ul a {
        font-size: 14px;
        color: {{ section.settings.link_color }};
        margin-top: 8px;
        display: block;
        transition: color 0.2s;
      }
      @media (max-width: 767px) {
      footer.footer-custom .prose ul{
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
      footer.footer-custom .prose ul li:first-child{
        display: none;
      }
    }
      .footer-link:hover, footer.footer-custom ul a:hover {
        text-decoration: underline;
      }
      /* Newsletter Button Fix */
      .newsletter-card button {
        background-color: {{ section.settings.accent_color }};
      }
      .social-icon img {
    width: 100%;
    height: 100%;
    max-width: 20px;
    object-fit: contain;
    transition: filter 0.3s ease, transform 0.3s ease;
  }

  .social-icon:hover img {
    filter: grayscale(100%);
      }
</style>

{% schema %}
{
  "name": "Custom Footer",
  "settings": [
    {
      "type": "header",
      "content": "Navigation"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Footer Menu",
      "default": "footer"
    },
    {
      "type": "header",
      "content": "Middle Column"
    },
    {
      "type": "richtext",
      "id": "middle_column_text",
      "label": "Middle Column Content",
      "info": "Leave empty to keep space blank"
    },
    {
      "type": "header",
      "content": "Newsletter Box"
    },
    {
      "type": "text",
      "id": "newsletter_title",
      "label": "Heading",
      "default": "Deals, Inspiration and Trends"
    },
    {
      "type": "textarea",
      "id": "newsletter_text",
      "label": "Subtext",
      "default": "Get it first. Sign up now for up-to-the-minute offers, sales and news."
    },
    {
      "type": "checkbox",
      "id": "show_social",
      "label": "Show Social Icons",
      "default": true
    },
    {
      "type": "text",
      "id": "social_handle",
      "label": "Social Handle Text",
      "default": "GrowLightHeaven"
    },
    {
      "type": "header",
      "content": "Styling & Colors"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading Color",
      "default": "#8B898B"
    },
    {
      "type": "color",
      "id": "link_color",
      "label": "Link Color",
      "default": "#8B898B"
    },
    {
      "type": "color",
      "id": "accent_color",
      "label": "Button Color (Green)",
      "default": "#006A2E"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding Top",
      "default": 64
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 32
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "footer_heading_spacing",
      "label": "Space below heading",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "default": 12
    },
    {
      "type": "range",
      "id": "footer_link_spacing",
      "label": "Space between links",
      "min": 0,
      "max": 30,
      "step": 2,
      "unit": "px",
      "default": 8
    },
    {
      "type": "range",
      "id": "newsletter_spacing",
      "label": "Space between newsletter elements",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "default": 16
    }
  ],
  "blocks": [
    {
      "type": "social_icon",
      "name": "Social Icon",
      "settings": [
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Social Icon Image"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Social Link"
        }
      ]
    }
  ],
  "max_blocks": 10
}
{% endschema %}

<script>
  function toggleAccordion(button) {
    const accordionItem = button.parentElement;
    const content = accordionItem.querySelector('.accordion-content');
    const icon = button.querySelector('.accordion-icon');

    // Close all other accordions
    const allAccordions = document.querySelectorAll('.accordion-item');
    allAccordions.forEach((item) => {
      if (item !== accordionItem) {
        const otherContent = item.querySelector('.accordion-content');
        const otherIcon = item.querySelector('.accordion-icon');
        otherContent.classList.remove('open');
        otherIcon.classList.remove('open');
      }
    });

    // Toggle current accordion
    content.classList.toggle('open');
    icon.classList.toggle('open');
  }

  const backToTopBtn = document.getElementById("backToTop");

// 1. Show/Hide button based on scroll position
window.onscroll = function() {
  if (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) {
    backToTopBtn.style.display = "block";
  } else {
    backToTopBtn.style.display = "none";
  }
};

// 2. Scroll to top on click
backToTopBtn.onclick = function() {
  window.scrollTo({
    top: 0,
    behavior: "smooth" // Makes it a nice smooth glide instead of a jump
  });
};
</script>
